<div class="container">
  <h2 mat-dialog-title>Prompt Fine-tuning</h2>
  <form [formGroup]="formGroup" (submit)="handleProcess()">
    <div class="form-container">
      <div class="param-container">
        <mat-form-field appearance="outline">
          <mat-label>Temperature</mat-label>
          <input
            type="number"
            matInput
            placeholder="Temperature"
            formControlName="temperature"
            title="What sampling temperature to use, between 0 and 2. Higher values like 0.8 will
            make the output more random, while lower values like 0.2 will make it more
            focused and deterministic.

            We generally recommend altering this or `top_p` but not both."
          />
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Top P</mat-label>
          <input
            type="number"
            matInput
            placeholder="Top P"
            formControlName="topP"
            title="An alternative to sampling with temperature, called nucleus sampling, where the
            model considers the results of the tokens with top_p probability mass. So 0.1
            means only the tokens comprising the top 10% probability mass are considered.

            We generally recommend altering this or `temperature` but not both."
          />
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Max Tokens</mat-label>
          <input
            type="number"
            matInput
            placeholder="Max Tokens"
            formControlName="maxTokens"
            title="The maximum number of [tokens](/tokenizer) that can be generated in the chat
            completion.

            The total length of input tokens and generated tokens is limited by the model's
            context length."
          />
        </mat-form-field>
      </div>
      <mat-form-field appearance="outline">
        <mat-label>Template</mat-label>
        <textarea
          matInput
          placeholder="Prompt Template"
          formControlName="template"
          class="template"
        ></textarea>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Context</mat-label>
        <textarea
          matInput
          placeholder="Context"
          formControlName="context"
          class="context"
        ></textarea>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Knowledge</mat-label>
        <textarea
          matInput
          placeholder="Elements Knowledge"
          formControlName="knowledge"
          class="knowledge"
        ></textarea>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>User Content</mat-label>
        <input
          matInput
          placeholder="User Content"
          formControlName="userContent"
          class="user-content"
        />
      </mat-form-field>
    </div>
    <div class="action-container">
      <div class="button-container">
        <button
          type="submit"
          mat-stroked-button
          color="primary"
          [disabled]="!formGroup.valid"
        >
          Process
        </button>
        <button
          type="button"
          mat-stroked-button
          color="accent"
          (click)="handleReset()"
        >
          Reset
        </button>
        <button
          type="button"
          mat-stroked-button
          color="warn"
          (click)="handleClear()"
        >
          Clear
        </button>
      </div>
    </div>
  </form>
  <div class="response">
    <p>
      {{ selectPrompt | async }}
    </p>
    @if( selectPrompt | async) {
    <button
      mat-mini-fab
      color="primary"
      [cdkCopyToClipboard]="(selectPrompt | async) || ''"
      title="Copy Prompt"
    >
      <mat-icon>content_copy</mat-icon>
    </button>
    }
  </div>
</div>
